<ion-header class="ion-no-border" mode="ios" translucent="true">
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button [routerLink]="['/list-catfacts']"></ion-back-button>
        </ion-buttons>
        <ion-title>Update Cat Fact</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content fullscreen="true">
    <ion-progress-bar [type]="'indeterminate'" *ngIf="showLoader"></ion-progress-bar>
    <ion-card>
        <img id="cardImg" [src]="catImage"/>
        <ion-card-header>
            <ion-card-title color="primary">
                <ion-input id="titleInput" spellcheck="false" [(ngModel)]="catfactTitle"></ion-input>
            </ion-card-title>
        </ion-card-header>
        <ion-card-content>
            <ion-spinner name="dots" *ngIf="isCatFactLoading"></ion-spinner>
            <ion-textarea id="textInput" autoGrow="true" wrap="soft" spellcheck="false"
                          [(ngModel)]="catfactText" *ngIf="!isCatFactLoading">
            </ion-textarea>
        </ion-card-content>
        <ion-item *ngIf="!isUpdatingRating || savedRating ===!0">
            <ion-icon name="star-outline" *ngFor="let i of starRatingArray(savedRating).fill(1)"
                      (click)="updateRating()" [ngStyle]="{'color': getSavedColor(savedRating)}"></ion-icon>
        </ion-item>
        <ion-item *ngIf="isUpdatingRating || savedRating ===0">
            <ion-icon name="star-outline" *ngFor="let num of [1,2,3,4,5]"
                      (click)="rate(num)" [ngStyle]="{'color': getUpdatedColor(num)}"></ion-icon>
        </ion-item>
    </ion-card>
</ion-content>

<ion-footer class="ion-no-border" mode="ios" translucent="true">
    <ion-toolbar>
        <ion-grid>
            <ion-row>
                <ion-col>
                    <ion-button fill="clear" size="small" (click)="presentDeleteElementAlert()">
                        <ion-icon name="trash-outline" slot="icon-only"></ion-icon>
                    </ion-button>
                </ion-col>
                <ion-col>
                    <ion-button fill="clear" size="small" (click)="saveCatFact()">
                        <ion-icon name="save-outline" slot="icon-only"></ion-icon>
                    </ion-button>
                </ion-col>
                <ion-col>
                    <ion-button fill="clear" size="small" (click)="getNextImage()">
                        <ion-icon name="image-outline" slot="icon-only"></ion-icon>
                    </ion-button>
                </ion-col>
                <ion-col>
                    <ion-button fill="clear" size="small" (click)="getNextCatFactText()">
                        <ion-icon name="refresh-outline" slot="icon-only"></ion-icon>
                    </ion-button>
                </ion-col>
            </ion-row>
        </ion-grid>
    </ion-toolbar>
</ion-footer>
